<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>3D Charts with A-Frame and BabiaXR</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-babia-components/dist/aframe-babia-components.min.js"></script>
  <script src="https://unpkg.com/aframe-environment-component@1.0.0/dist/aframe-environment-component.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v7.2.0/dist/aframe-extras.min.js"></script>
  <script src="https://unpkg.com/aframe-orbit-controls-component/dist/aframe-orbit-controls-component.min.js"></script>
</head>

<body>
  <a-scene>
    <!-- Importar ambiente de oficina -->
    <a-assets>
      <a-asset-item id="office" src="assets\aesalavirtual.glb"></a-asset-item>
    </a-assets>

    <!-- Entorno de la oficina -->
    <a-entity gltf-model="#office" rotation="0 0 0" scale="150 100 150" position="60 5 -5"></a-entity>

    <!-- Light -->
    <a-light type="point" intensity="1" position="140 20 4.86"></a-light>

    <!-- Camera with Orbit Controls -->
    <a-entity position="170 5 105">
      <a-entity camera look-controls orbit-controls="
          autoRotate: false; 
          enableDamping: true; 
          dampingFactor: 0.25; 
          rotateSpeed: 0.25; 
          minDistance: 1; 
          maxDistance: 20;
          enableZoom: true;
          zoomSpeed: 1.0;
        ">
      </a-entity>
      <a-entity cursor="rayOrigin: mouse"></a-entity>
      <a-entity laser-controls="hand: right"></a-entity>
    </a-entity>

    <!-- Pie Chart Entity -->
    <!-- Data Entity for JSON -->
    <a-entity id="data" babia-queryjson="data.json"></a-entity>

    <!-- Pie Chart Entity -->
    <a-entity id="pieChart"
      babia-pie='legend: true; palette: blues; key: TIPOCURSO_DESC; size: Recuento de TIPOCURSO_DESC' 
      position="-100 0 70"
      rotation="90 90 0" 
      scale="30 30 30" 
      visible="true">
    </a-entity>

    <!-- Evento de Click para Mostrar/Esconder GrÃ¡fico -->
    <script>
      var pieChartVisible = false;

      document.querySelector('a-scene').addEventListener('click', function () {
        if (!pieChartVisible) {
          document.querySelector('#pieChart').setAttribute('visible', 'true');
          pieChartVisible = true;
        } else {
          document.querySelector('#pieChart').setAttribute('visible', 'false');
          pieChartVisible = false;
        }

      });
    </script>
  </a-scene>
  <script src="app.js" type="module"></script>


</body>

</html>
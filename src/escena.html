
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>3D Charts with A-Frame and BabiaXR</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-babia-components/dist/aframe-babia-components.min.js"></script>
  <script src="https://unpkg.com/aframe-environment-component@1.0.0/dist/aframe-environment-component.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v7.2.0/dist/aframe-extras.min.js"></script>
  <script src="https://unpkg.com/aframe-orbit-controls-component/dist/aframe-orbit-controls-component.min.js"></script>
</head>
<body>
  <a-scene>
    <!-- Importar ambiente de oficina -->
    <a-assets>
      <a-asset-item id="office" src="assets\aesalavirtual.glb"></a-asset-item>
    </a-assets>

    <!-- Entorno de la oficina -->
    <a-entity gltf-model="#office" scale="150 100 150" position="5 5 -5"></a-entity>

    <!-- Light -->
    <a-light type="point" intensity="1" position="-10 20 30"></a-light>

      <!-- Camera with Orbit Controls -->
    <a-entity position="20 5 105">
      <a-entity 
        camera 
        look-controls 
        orbit-controls="
          autoRotate: false; 
          enableDamping: true; 
          dampingFactor: 0.25; 
          rotateSpeed: 0.25; 
          minDistance: 1; 
          maxDistance: 20;
          enableZoom: true;
          zoomSpeed: 1.0;
        ">
      </a-entity>
      <a-entity cursor="rayOrigin: mouse"></a-entity>
      <a-entity laser-controls="hand: right"></a-entity>
    </a-entity>

    <!-- Pie Chart Entity -->
    <a-entity id="pieChart" babia-pie='legend: true; palette: blues; key: TIPOCURSO_DESC; size: Recuento de TIPOCURSO_DESC;
                         data: [{"TIPOCURSO_DESC": "Formación - Curso de formación online", "Recuento de TIPOCURSO_DESC": 12798},
                                {"TIPOCURSO_DESC": "Formación - Curso de Formación", "Recuento de TIPOCURSO_DESC": 5142},
                                {"TIPOCURSO_DESC": "Formación - Certificado de Profesionalidad", "Recuento de TIPOCURSO_DESC": 3202},
                                {"TIPOCURSO_DESC": "PFAs - Curso de Formación", "Recuento de TIPOCURSO_DESC": 3169},
                                {"TIPOCURSO_DESC": "Talleres - Curso de Formación", "Recuento de TIPOCURSO_DESC": 2744},
                                {"TIPOCURSO_DESC": "PFAs - Certificado de Profesionalidad", "Recuento de TIPOCURSO_DESC": 2403},
                                {"TIPOCURSO_DESC": "Otros - Itinerario sociolaboral", "Recuento de TIPOCURSO_DESC": 1002},
                                {"TIPOCURSO_DESC": "Formación - Módulo", "Recuento de TIPOCURSO_DESC": 801},
                                {"TIPOCURSO_DESC": "Talleres - Certificado de Profesionalidad", "Recuento de TIPOCURSO_DESC": 439},
                                {"TIPOCURSO_DESC": "Formación - Especialidad Formativa Sepe", "Recuento de TIPOCURSO_DESC": 319},
                                {"TIPOCURSO_DESC": "Otros - Seminario", "Recuento de TIPOCURSO_DESC": 260},
                                {"TIPOCURSO_DESC": "Otros - Curso de Formación", "Recuento de TIPOCURSO_DESC": 188},
                                {"TIPOCURSO_DESC": "Otros - Reinvención", "Recuento de TIPOCURSO_DESC": 101}]'
              position="0 1 10" rotation="90 0 0" scale="30 30 30" visible="false"></a-entity>

    

    <!-- Evento de Click para Mostrar/Esconder Gráfico -->
    <script>
      var pieChartVisible = false;
      
      document.querySelector('a-scene').addEventListener('click', function () {
        if (!pieChartVisible) {
          document.querySelector('#pieChart').setAttribute('visible', 'true');
          pieChartVisible = true;
        } else {
          document.querySelector('#pieChart').setAttribute('visible', 'false');
          pieChartVisible = false;
        }
        
      });
    </script>
  </a-scene>
</body>
</html>




